/* ==========================================================================
   GOOGLE DARK STYLE (FIXED: Visible Tabs & Readable Sidebar)
   ========================================================================== */

body {
    /* --- Цветовая схема (Google Dark / Material) --- */
    --background-primary: #1e1f20;   /* Фон редактора */
    --background-secondary: #252627; /* Боковая панель */
    --background-secondary-alt: #18191a; /* Фон за вкладками (темнее) */
    --background-modifier-border: #3c4043; /* Границы */
    
    /* --- Типографика --- */
    /* Заголовки - Чисто белые */
    --h1-color: #ffffff;
    --h2-color: #ffffff;
    --h3-color: #f0f0f0;
    --h4-color: #f0f0f0;
    
    /* Обычный текст - Чуть приглушенный (чтобы не резал глаза) */
    --text-normal: #bec1c5;          /* Светло-серый, комфортный */
    --text-muted: #9aa0a6;           /* Второстепенный текст */
    --text-faint: #5f6368;           /* Еле заметный */
    
    /* Акценты */
    --text-accent: #8ab4f8;          /* Google Blue */
    --text-accent-hover: #aecbfa;
    --caret-color: #8ab4f8; 

    /* --- Размеры шрифтов --- */
    --h1-size: 2.2em; --h1-weight: 400;
    --h2-size: 1.6em; --h2-weight: 400;
    --h3-size: 1.2em; --h3-weight: 500;
    
    /* --- Code Variables (VS Code Dark) --- */
    --code-background: #28292a; 
    --code-border-color: #3c4043;
    --font-family-code: 'JetBrains Mono', 'Roboto Mono', Consolas, monospace;
    --code-size: 0.9em;
    
    /* Подсветка синтаксиса */
    --code-normal: #e8eaed;
    --code-comment: #7ba17e;
    --code-string: #ce9178;
    --code-function: #dcdcaa;
    --code-keyword: #569cd6;
    --code-operator: #d4d4d4;
    --code-property: #9cdcfe;
    --code-value: #b5cea8;
    
    --radius-m: 8px;
}

/* ==========================================================================
   1. ОГРАНИЧЕНИЕ ШИРИНЫ И ТЕКСТ
   ========================================================================== */

/* Ограничение ширины контента */
.markdown-source-view .cm-scroller,
.markdown-preview-view { 
    max-width: 1400px !important; 
    margin: 0 auto !important; 
    width: 100%;
}

/* Настройки шрифта */
.markdown-source-view, 
.markdown-preview-view { 
    font-family: 'Inter', 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif;
    line-height: 1.6;
    font-size: 16px;
    color: var(--text-normal); 
}

/* Явно приглушаем параграфы и списки */
.cm-line, p, li {
    color: var(--text-normal) !important;
}

/* Заголовки выделяются яркостью */
.cm-header, h1, h2, h3, h4, h5, h6 {
    color: var(--h1-color) !important;
    letter-spacing: -0.01em;
    margin-top: 1.5em !important;
    margin-bottom: 0.8em !important;
}

/* ==========================================================================
   2. ВЕРХНЯЯ ПАНЕЛЬ И ВКЛАДКИ (ИСПРАВЛЕНО)
   ========================================================================== */

/* Фон контейнера вкладок и заголовка */
/* .titlebar {
    background-color: var(--background-secondary-alt) !important; 
} */
.workspace-tab-header-container {
    /* background-color: var(--background-secondary) !important; */
    padding-top: 0px;
    border-bottom: 1px solid var(--background-modifier-border);
}

/* Сами вкладки */
.workspace-tab-header {
    background-color: transparent !important;
    color: var(--text-muted);
    border-radius: 8px 8px 0 0;
    margin-right: 2px;
}

/* Активная вкладка - должна быть цвета редактора */
.workspace-tab-header.is-active {
    background-color: var(--background-primary) !important; 
    color: var(--text-normal) !important;
    font-weight: 500;
    box-shadow: none !important;
    border-top: 1px solid var(--text-muted); 
    border-left: 1px solid var(--background-modifier-border); 
    border-right: 1px solid var(--background-modifier-border); 
}

.workspace-tab-header:not(.is-active):hover {
    background-color: rgba(255,255,255, 0.05) !important;
    color: var(--text-normal);
}

/* Кнопки окна (свернуть/закрыть) сливаются с фоном */
/* .titlebar-button {
    background-color: transparent !important;
    opacity: 0.6;
} */
.titlebar-button:hover {
    background-color: rgba(255,255,255, 0.1) !important;
    opacity: 1;
}

/* Кнопки сайдбара слева */
.sidebar-toggle-button {
    background-color: transparent !important;
    border: none !important;
}

/* ==========================================================================
   3. SIDEBAR / OUTLINER (ИСПРАВЛЕНО: ЧИТАЕМОСТЬ)
   ========================================================================== */

/* Текст файлов - теперь светлее и читаемее */
.nav-folder-title, .nav-file-title {
    font-size: 1em;
    color: #c0c0c0; /* Светло-серый, не темный! */
    border-radius: 0 20px 20px 0;
    padding: 4px 8px 4px 15px;
    margin-left: -10px;
    transition: background 0.2s ease;
}

/* При наведении */
.nav-file-title:hover, .nav-folder-title:hover {
    color: #ffffff;
    background-color: rgba(255, 255, 255, 0.06);
}

/* Активный файл */
.nav-file-title.is-active {
    background-color: rgba(138, 180, 248, 0.15); /* Прозрачный синий */
    color: var(--text-accent) !important; /* Голубой текст */
    font-weight: 500;
}

/* Иконки файлов */
body:not(.remove-file-icons) .nav-file-title .nav-file-title-content:not(.mk-tree-text)::before {
    content: "";
    display: inline-block;
    width: 14px; height: 14px;
    margin-right: 8px;
    background-color: #c0c0c0; /* Цвет иконки под текст */
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>') no-repeat center;
    -webkit-mask-size: contain;
    opacity: 0.7;
}
.nav-file-title.is-active .nav-file-title-content::before {
    background-color: var(--text-accent);
    opacity: 1;
}

/* ==========================================================================
   4. LISTS & CHECKBOXES (FIX FOR BUG)
   ========================================================================== */

/* Режим чтения */
.markdown-preview-view li {
    margin-bottom: 0.6em !important;
}

/* Режим редактирования (Padding Fix) */
.markdown-source-view.is-live-preview .HyperMD-list-line {
    padding-bottom: 0.6em !important;
    margin-bottom: 0 !important;
}

/* Круглые чекбоксы */
input[type=checkbox] {
    -webkit-appearance: none;
    appearance: none;
    border-radius: 50%;
    border: 2px solid #9aa0a6;
    width: 16px;
    height: 16px;
    position: relative;
    top: 3px;
    cursor: pointer;
}
input[type=checkbox]:checked {
    background-color: var(--text-accent);
    border-color: var(--text-accent);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%231e1f20'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'/%3E%3C/svg%3E");
}

/* ==========================================================================
   5. CODE BLOCKS (CARDS)
   ========================================================================== */

/* Карточки цитат */
blockquote {
    border-left: 3px solid var(--text-accent);
    background-color: #292a2d;
    border-radius: 0 var(--radius-m) var(--radius-m) 0;
    padding: 10px 20px;
    margin: 1em 0;
    color: var(--text-muted);
    font-style: italic;
}

/* Инлайн код */
.markdown-source-view.is-live-preview .cm-inline-code,
.markdown-reading-view code {
    color: #e8eaed !important;
    background-color: var(--code-background);
    border: 1px solid var(--code-border-color);
    padding: 2px 6px;
    border-radius: 6px;
    font-family: var(--font-family-code);
    font-size: 0.85em;
}

/* Блоки кода (Скругленные) */
.markdown-reading-view pre {
    border: 1px solid var(--code-border-color);
    border-radius: var(--radius-m);
    padding: 15px;
    background-color: var(--code-background);
}
/* Редактор кода */
.markdown-source-view.is-live-preview .HyperMD-codeblock-begin {
    border-top: 1px solid var(--code-border-color);
    border-left: 1px solid var(--code-border-color);
    border-right: 1px solid var(--code-border-color);
    border-top-left-radius: var(--radius-m);
    border-top-right-radius: var(--radius-m);
    padding-top: 10px;
    background-color: var(--code-background);
}
.markdown-source-view.is-live-preview .HyperMD-codeblock {
    border-left: 1px solid var(--code-border-color);
    border-right: 1px solid var(--code-border-color);
    background-color: var(--code-background);
}
.markdown-source-view.is-live-preview .HyperMD-codeblock-end {
    border-bottom: 1px solid var(--code-border-color);
    border-left: 1px solid var(--code-border-color);
    border-right: 1px solid var(--code-border-color);
    border-bottom-left-radius: var(--radius-m);
    border-bottom-right-radius: var(--radius-m);
    padding-bottom: 10px;
    background-color: var(--code-background);
}

/* Цвета кода (VS Code) */
.cm-s-obsidian span.cm-comment { color: var(--code-comment) !important; }
.cm-s-obsidian span.cm-string { color: var(--code-string) !important; }
.cm-s-obsidian span.cm-keyword { color: var(--code-keyword) !important; }
.cm-s-obsidian span.cm-def { color: var(--code-function) !important; }
.cm-s-obsidian span.cm-property { color: var(--code-property) !important; }
.cm-s-obsidian span.cm-number { color: var(--code-value) !important; }
.cm-s-obsidian span.cm-operator { color: var(--code-operator) !important; }

/* Скроллбар (Тонкий) */
::-webkit-scrollbar { width: 8px; height: 8px; background: transparent; }
::-webkit-scrollbar-thumb { background: #5f6368; border-radius: 4px; border: 2px solid var(--background-primary); }
