/* ==========================================================================
   THEME: TECH001 DARK (HIGH CONTRAST VERSION)
   STYLE: Deep Dark, Pill Shapes, Minimalist, Bright Headers
   AUTHOR: Roman Volodin
   ========================================================================== */

@import url('https://fonts.googleapis.com/css2?family=Google+Sans+Code:ital,wght@0,300..800;1,300..800&display=swap');

/* ==========================================================================
   1. VARIABLES & PALETTE
   ========================================================================== */
body {
    /* --- Color Palette (Tech001 / Material Design 3) --- */
    --background-primary: #191919;       /* Deepest Dark (Main Background) */
    --background-secondary: #1e1f20;     /* Sidebar & Surfaces */
    --background-secondary-alt: #000000; /* Top header blend */
    --background-modifier-border: #444746; /* Subtle borders */

    /* --- Typography --- */
    --font-interface: 'Google Sans', 'Roboto', 'Inter', sans-serif;
    --font-text: 'Google Sans', 'Roboto', 'Inter', sans-serif;
    --font-family-code: 'Google Sans Code', 'JetBrains Mono', monospace;

    /* --- Text Colors (HIERARCHY UPDATE) --- */
    
    /* 1. Main Text - GRAY (Muted) */
    /* Make it darker so it doesn't compete with headers */
    --text-normal: #bfbfbf;              
    --text-muted: #757575;               
    --text-faint: #444746;  
    --text-navbar: #afafaf;            /* Navbar text color */             
    
    /* 2. Headers - Bright White */
    /* Maximum contrast for better readability */
    --h1-color: #ffffff;
    --h2-color: #ffffff;
    --h3-color: #f5f5f5;
    --h4-color: #f5f5f5;
    --h5-color: #f5f5f5;
    --h6-color: #f5f5f5;
    
    --h1-size: 2.2em; --h1-weight: 400;
    --h2-size: 1.6em; --h2-weight: 400;
    --h3-size: 1.2em; --h3-weight: 500;

    /* --- Accents (Tech001 Blue) --- */
    --text-accent: #A8C7FA;              /* Tech001 Blue 200 */
    --text-accent-hover: #D3E3FD;
    --interactive-accent: #3b5260;       /* Deep Blue background for active items */
    --caret-color: #A8C7FA;

    /* --- Shapes & UI --- */
    --radius-s: 4px;
    --radius-m: 12px;                    /* Soft rounded corners */
    --radius-l: 24px;                    /* Full pill shape */
    
    /* --- Code Syntax Highlighting (Pastel/Vivid Mix) --- */
    --code-background: #1e1f20;
    --code-border-color: #444746;
    --code-size: 0.9em;
    
    --code-normal: #e3e3e3;
    --code-comment: #8e918f;
    --code-string: #f28b82;              /* Pastel Red */
    --code-function: #A8C7FA;            /* Pastel Blue */
    --code-keyword: #c58af9;             /* Pastel Purple */
    --code-operator: #c4c7c5;
    --code-property: #81c995;            /* Pastel Green */
    --code-value: #fdd663;               /* Pastel Yellow */
}

/* ==========================================================================
   2. GLOBAL LAYOUT & SCROLLBARS
   ========================================================================== */

/* Base Fonts & Line Height */
.markdown-source-view, 
.markdown-preview-view { 
    font-family: var(--font-text);
    line-height: 1.7;
    font-size: 16px;
    color: var(--text-normal); 
}

/* --- TEXT HIERARCHY ENFORCEMENT --- */

/* 1. Headers are Bright White */
.cm-header, h1, h2, h3, h4, h5, h6 {
    color: var(--h1-color) !important;
    font-weight: 300 !important; /* Чуть жирнее для контраста */
}

/* 2. Body text, Lists, Paragraphs are Muted Gray */
/* This rule ensures that regular text is gray */
.cm-line, p, li, ul, ol {
    color: var(--text-normal) !important;
}

/* 3. Bold text stands out (White) */
strong, b, .cm-strong {
    color: #e3e3e3 !important; /* Bold text is slightly lighter than normal */
}

/* Minimalist Scrollbars */
::-webkit-scrollbar { 
    width: 10px; 
    height: 10px; 
    background: transparent; 
}
::-webkit-scrollbar-thumb { 
    background: #444746; 
    border-radius: 10px; 
    border: 3px solid var(--background-primary); 
}
::-webkit-scrollbar-thumb:hover { 
    background: #5f6368; 
}

/* ==========================================================================
   3. NOTION-STYLE CENTERED LAYOUT
   ========================================================================== */

/* Scroller takes full width (Scrollbar stays on the right edge) */
.markdown-source-view.mod-cm6 .cm-scroller,
.markdown-preview-view {
    max-width: 100% !important; 
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    padding-top: 50px !important; /* Top spacing */
}

/* Centered Content Container */
.markdown-source-view.mod-cm6 .cm-sizer, /* Live Preview */
.markdown-preview-sizer {                /* Reading Mode */
    max-width: 1100px !important;
    margin: 0 auto !important;
    padding-left: 20px;
    padding-right: 20px;
}

/* Ensure elements don't overflow */
.markdown-preview-view .markdown-preview-sizer hr,
.markdown-preview-view .markdown-preview-sizer table {
    max-width: 100%;
}

/* ==========================================================================
   4. WINDOW TITLEBAR & MAIN TABS
   ========================================================================== */

/* Transparent Titlebar (Z-index fix to not overlay tabs) */
.titlebar {
    background-color: transparent !important;
    z-index: 0; 
}

/* Window Controls (Minimize/Close) Background */
.titlebar-button-container {
    background-color: var(--background-secondary) !important; 
}
.titlebar-button:hover {
    background-color: rgba(255,255,255, 0.08) !important;
}

/* Main Tab Container */
.workspace-tab-header-container {
    background-color: var(--background-secondary) !important;
    border-bottom: 1px solid var(--background-modifier-border);
}

/* Individual Tabs */
.workspace-tab-header {
    background-color: transparent !important;
    color: var(--text-muted);
    border-radius: var(--radius-m) var(--radius-m) 0 0;
    margin-right: 4px;
}

/* Active Tab Styling */
.workspace-tab-header.is-active {
    background-color: var(--background-primary) !important; 
    font-weight: 500;
    box-shadow: none !important;
    border-top: 1px solid var(--text-faint); 
    border-left: 1px solid var(--text-faint); 
    border-right: 1px solid var(--text-faint); 
}

/* Hover Tab */
.workspace-tab-header:not(.is-active):hover {
    color: var(--text-normal);
    background-color: rgba(255,255,255, 0.03) !important;
}

/* ==========================================================================
   5. SIDEBAR & RIBBON
   ========================================================================== */

/* Toggle Button (Top-Left Corner) */
.sidebar-toggle-button {
    background-color: var(--background-secondary) !important;
    border-bottom: 1px solid var(--background-modifier-border) !important;
    
    /* Center Alignment */
    margin: 1px auto !important; 
    padding: 0 !important;
    display: flex !important;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: var(--text-muted) !important;
}

.sidebar-toggle-button:hover {
    color: var(--text-accent) !important;
    background-color: var(--background-secondary) !important;
}

/* Sidebar Navigation Items (Files/Folders) */
.nav-folder-title, .nav-file-title {
    font-size: 0.95em;
    color: var(--text-navbar);
    border-radius: var(--radius-l); /* Pill Shape */
    padding: 6px 12px;
    margin: 2px 8px;
}

.nav-file-title:hover, .nav-folder-title:hover {
    color: var(--text-normal);
    background-color: rgba(168, 199, 250, 0.08); 
}

/* Active File */
.nav-file-title.is-active {
    color: var(--text-accent) !important; 
    font-weight: 500;
}

/* Sidebar Panel Buttons (Files, Search, etc. - Left/Right Panels) */
.mod-left-split .workspace-tab-header,
.mod-right-split .workspace-tab-header {
    background-color: transparent !important;
    border: none !important;
}

.mod-left-split .workspace-tab-header.is-active,
.mod-right-split .workspace-tab-header.is-active {
    background-color: rgba(168, 199, 250, 0.15) !important;
    color: var(--text-accent) !important;
    border-top: none !important;
}

/* ==========================================================================
   6. EDITOR STYLES (LISTS, QUOTES, CHECKBOXES)
   ========================================================================== */

/* List Padding Fix (Prevents selection glitch in Live Preview) */
.markdown-source-view.is-live-preview .HyperMD-list-line {
    padding-bottom: 0.7em !important;
    margin-bottom: 0 !important;
}
.markdown-preview-view li {
    margin-bottom: 0.7em !important;
}

/* Blockquotes (Card Style) */
blockquote {
    border: none;
    background-color: #1e1f20;
    border-radius: var(--radius-m);
    padding: 16px 24px;
    margin: 1.5em 0;
    color: var(--text-normal);
    font-style: normal;
    border-left: 4px solid var(--text-accent);
}

/* Round Checkboxes */
input[type=checkbox] {
    -webkit-appearance: none;
    appearance: none;
    border-radius: 50%;
    border: 1.5px solid var(--text-muted);
    width: 18px;
    height: 18px;
    position: relative;
    top: 4px;
    cursor: pointer;
    background-color: transparent;
}
input[type=checkbox]:checked {
    background-color: var(--text-accent);
    border-color: var(--text-accent);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23131314'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'/%3E%3C/svg%3E");
}

/* ==========================================================================
   7. CODE BLOCKS & INLINE CODE
   ========================================================================== */

/* Inline Code (Pill Style) */
.markdown-source-view.is-live-preview .cm-inline-code,
.markdown-reading-view code {
    color: var(--text-accent) !important;
    background-color: #1e1f20;
    border: 1px solid #333;
    padding: 2px 5px;
    font-family: var(--font-family-code);
}

/* Code Blocks Container */
.markdown-reading-view pre,
.markdown-source-view.is-live-preview .HyperMD-codeblock {
    background-color: var(--code-background);
    font-family: var(--font-family-code);
}

.markdown-reading-view pre {
    border: 1px solid var(--background-modifier-border);
    border-radius: var(--radius-m);
    padding: 20px;
}

/* Live Preview Code Borders (Rounded) */
.markdown-source-view.is-live-preview .HyperMD-codeblock-begin {
    border-top: 1px solid var(--background-modifier-border);
    border-left: 1px solid var(--background-modifier-border);
    border-right: 1px solid var(--background-modifier-border);
    border-top-left-radius: var(--radius-m);
    border-top-right-radius: var(--radius-m);
    padding-top: 5px;
    background-color: var(--code-background);
}
.markdown-source-view.is-live-preview .HyperMD-codeblock {
    border-left: 1px solid var(--background-modifier-border);
    border-right: 1px solid var(--background-modifier-border);
}
.markdown-source-view.is-live-preview .HyperMD-codeblock-end {
    border-bottom: 1px solid var(--background-modifier-border);
    border-left: 1px solid var(--background-modifier-border);
    border-right: 1px solid var(--background-modifier-border);
    border-bottom-left-radius: var(--radius-m);
    border-bottom-right-radius: var(--radius-m);
    padding-bottom: 5px;
    background-color: var(--code-background);
}

/* Syntax Highlighting Overrides */
.cm-s-obsidian span.cm-comment { color: var(--code-comment) !important; }
.cm-s-obsidian span.cm-string { color: var(--code-string) !important; }
.cm-s-obsidian span.cm-keyword { color: var(--code-keyword) !important; }
.cm-s-obsidian span.cm-def { color: var(--code-function) !important; }
.cm-s-obsidian span.cm-property { color: var(--code-property) !important; }
.cm-s-obsidian span.cm-number { color: var(--code-value) !important; }

/* ==========================================================================
   8. CUSTOM FILE ICONS & ALIGNMENT
   ========================================================================== */

/* --- A. Standard File Icon (Paper Sheet) --- */
body:not(.remove-file-icons) .nav-file-title .nav-file-title-content:not(.mk-tree-text)::before {
    content: "";
    display: inline-block;
    
    /* Fixed Dimensions for Alignment */
    width: 16px; 
    height: 14px;
    margin-right: 6px;
    
    background-color: var(--text-navbar);
    
    /* Icon Mask */
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>') no-repeat center;
    -webkit-mask-size: contain;
    opacity: 0.7;

    /* Vertical Alignment Fixes */
    vertical-align: middle;
    position: relative;     
    top: -1px;
}

/* Active File Icon Color */
.nav-file-title.is-active .nav-file-title-content::before {
    background-color: var(--text-accent);
    opacity: 1;
}

/* --- B. Code File Badges (Text Icons) --- */

/* High Specificity Selectors to override default icons */
body:not(.remove-file-icons) .nav-file-title[data-path$=".py"] .nav-file-title-content:not(.mk-tree-text)::before,
body:not(.remove-file-icons) .nav-file-title[data-path$=".js"] .nav-file-title-content:not(.mk-tree-text)::before,
body:not(.remove-file-icons) .nav-file-title[data-path$=".ts"] .nav-file-title-content:not(.mk-tree-text)::before,
body:not(.remove-file-icons) .nav-file-title[data-path$=".tsx"] .nav-file-title-content:not(.mk-tree-text)::before,
body:not(.remove-file-icons) .nav-file-title[data-path$=".html"] .nav-file-title-content:not(.mk-tree-text)::before,
body:not(.remove-file-icons) .nav-file-title[data-path$=".css"] .nav-file-title-content:not(.mk-tree-text)::before,
body:not(.remove-file-icons) .nav-file-title[data-path$=".json"] .nav-file-title-content:not(.mk-tree-text)::before,
body:not(.remove-file-icons) .nav-file-title[data-path$=".cpp"] .nav-file-title-content:not(.mk-tree-text)::before,
body:not(.remove-file-icons) .nav-file-title[data-path$=".c"] .nav-file-title-content:not(.mk-tree-text)::before,
body:not(.remove-file-icons) .nav-file-title[data-path$=".cs"] .nav-file-title-content:not(.mk-tree-text)::before,
body:not(.remove-file-icons) .nav-file-title[data-path$=".go"] .nav-file-title-content:not(.mk-tree-text)::before,
body:not(.remove-file-icons) .nav-file-title[data-path$=".sh"] .nav-file-title-content:not(.mk-tree-text)::before,
body:not(.remove-file-icons) .nav-file-title[data-path$=".yaml"] .nav-file-title-content:not(.mk-tree-text)::before,
body:not(.remove-file-icons) .nav-file-title[data-path$=".lua"] .nav-file-title-content:not(.mk-tree-text)::before,
body:not(.remove-file-icons) .nav-file-title[data-path$=".php"] .nav-file-title-content:not(.mk-tree-text)::before,
body:not(.remove-file-icons) .nav-file-title[data-path$=".yml"] .nav-file-title-content:not(.mk-tree-text)::before {
    
    /* Reset Mask and Background */
    -webkit-mask-image: none !important;
    mask-image: none !important;
    background-color: transparent !important;
    
    /* Text Styling */
    font-family: 'Google Sans', 'Consolas', monospace !important;
    font-weight: 900 !important;
    font-size: 10px !important;
    letter-spacing: 0px !important;
    
    /* Alignment (Must match standard icon width) */
    display: inline-flex !important;
    align-items: center !important;
    
    width: 16px !important;       
    height: 100% !important;
    margin-right: 6px !important; 
    opacity: 1 !important;
    
    content: "XYZ" !important; /* Fallback */
}

/* --- Specific Language Badges --- */

/* Python */
body:not(.remove-file-icons) .nav-file-title[data-path$=".py"] .nav-file-title-content:not(.mk-tree-text)::before {
    content: "PY" !important;
    color: #ebe572 !important;
}

/* Lua */
body:not(.remove-file-icons) .nav-file-title[data-path$=".lua"] .nav-file-title-content:not(.mk-tree-text)::before {
    content: "LU" !important;
    color: #58de92 !important;
}

/* JavaScript */
body:not(.remove-file-icons) .nav-file-title[data-path$=".js"] .nav-file-title-content:not(.mk-tree-text)::before {
    content: "JS" !important;
    color: #F7DF1E !important;
}

/* TypeScript */
body:not(.remove-file-icons) .nav-file-title[data-path$=".ts"] .nav-file-title-content:not(.mk-tree-text)::before {
    content: "TS" !important;
    color: #3178C6 !important;
}

/* HTML / CSS */
body:not(.remove-file-icons) .nav-file-title[data-path$=".html"] .nav-file-title-content:not(.mk-tree-text)::before {
    content: "HTM" !important;
    color: #E34F26 !important;
    font-size: 10px !important;
}
body:not(.remove-file-icons) .nav-file-title[data-path$=".css"] .nav-file-title-content:not(.mk-tree-text)::before {
    content: "CSS" !important;
    color: #1572B6 !important;
    font-size: 10px !important;
}

/* C / C++ / C# */
body:not(.remove-file-icons) .nav-file-title[data-path$=".cpp"] .nav-file-title-content:not(.mk-tree-text)::before {
    content: "CPP" !important;
    color: #76b0dc !important;
    font-size: 10px !important;
}
body:not(.remove-file-icons) .nav-file-title[data-path$=".c"] .nav-file-title-content:not(.mk-tree-text)::before {
    content: "C" !important;
    color: #A8B9CC !important;
}
body:not(.remove-file-icons) .nav-file-title[data-path$=".cs"] .nav-file-title-content:not(.mk-tree-text)::before {
    content: "C#" !important;
    color: #9B4F96 !important;
}

/* JSON / YAML */
body:not(.remove-file-icons) .nav-file-title[data-path$=".json"] .nav-file-title-content:not(.mk-tree-text)::before {
    content: "{ }" !important;
    color: #858585 !important;
}
body:not(.remove-file-icons) .nav-file-title[data-path$=".yaml"] .nav-file-title-content:not(.mk-tree-text)::before,
body:not(.remove-file-icons) .nav-file-title[data-path$=".yml"] .nav-file-title-content:not(.mk-tree-text)::before {
    content: "YML" !important;
    color: #CB171E !important;
    font-size: 10px !important;
}

/* Others */
body:not(.remove-file-icons) .nav-file-title[data-path$=".go"] .nav-file-title-content:not(.mk-tree-text)::before {
    content: "GO" !important;
    color: #00ADD8 !important;
}
body:not(.remove-file-icons) .nav-file-title[data-path$=".sh"] .nav-file-title-content:not(.mk-tree-text)::before {
    content: ">_" !important;
    color: #4EAA25 !important;
}
